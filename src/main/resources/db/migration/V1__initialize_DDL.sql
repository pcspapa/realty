create table realty_user (
    username varchar(255) not null,
    password varchar(255),
    enabled boolean not null,
    primary key (username)
);

create table realty_authority (
    id bigint generated by default as identity,
    username varchar(255) not null,
    role varchar(255),
    primary key (id)
);
alter table realty_authority add constraint FK_REALTY_USER_USERNAME foreign key (username) references realty_user;
alter table realty_authority add constraint UIX_REALTY_AUTHORITY_USERNAME_ROLE unique (username, role);

create table building (
    id bigint generated by default as identity,
    address_building_name varchar(255),
    address_city varchar(255),
    address_street varchar(255),
    address_zipcode varchar(255),
    basement_floor integer,
    ground_floor integer,
    typical_floor_rental_area_py decimal(12,2),
    typical_floor_rental_area_m2 decimal(12,2),
    typical_floor_exclusive_area_py decimal(12,2),
    typical_floor_exclusive_area_m2 decimal(12,2),
    typical_floor_exclusive_rt integer,
    typical_floor_height integer,
    created_username varchar(255) not null,
    created_date timestamp not null,
    updated_username varchar(255) not null,
    updated_date timestamp not null,
    primary key (id)
);
alter table building
    add constraint UIX_BUILDING_ADDRESS unique (address_zipcode, address_street, address_city, address_building_name);


create table contact (
    id bigint generated by default as identity,
    address varchar(255),
    company_name varchar(255),
    created_date timestamp not null,
    dept_name varchar(255),
    email varchar(255) not null,
    fax_no varchar(255),
    fullname varchar(255) not null,
    gender varchar(255),
    mobile_no varchar(255),
    note varchar(255),
    phone_no varchar(255),
    position varchar(255),
    type_of_enterprise varchar(255),
    type_of_industry varchar(255),
    updated_date timestamp not null,
    created_username varchar(255) not null,
    updated_username varchar(255) not null,
    primary key (id)
);
alter table contact
    add constraint UIX_CONTACT_NAME_MOBILE unique (fullname, mobile_no);


create table building_contact (
    building_id bigint not null,
    contact_id bigint not null,
    director varchar(255),
    primary key (building_id, contact_id)
);
alter table building_contact
    add constraint FK_CONTACT_ID
    foreign key (contact_id)
    references contact;
alter table building_contact
    add constraint FK_BUILDING_ID
    foreign key (building_id)
    references building;


create table office (
    id bigint generated by default as identity,
    building_id bigint not null,
    item_deal_cd varchar(255),
    item_type_cd varchar(255),
    floor_from integer,
    floor_to integer,
    floor_note varchar(255),
    rental_py decimal(12,2),
    exclusive_py decimal(12,2),
    deposit integer,
    rent integer,
    maintenance_fee integer,
    created_username varchar(255) not null,
    created_date timestamp not null,
    updated_username varchar(255) not null,
    updated_date timestamp not null,
    primary key (id)
);

create table proposal (
    id bigint generated by default as identity,
    air_conditioning_system_cd varchar(255),
    area_from integer,
    area_to integer,
    building_type_cd varchar(255),
    created_date timestamp not null,
    deposit_from bigint,
    deposit_to bigint,
    floor integer,
    interior varchar(255),
    item_deal_cd varchar(255),
    item_type_cd varchar(255),
    lease_from bigint,
    lease_to bigint,
    main_region_cb varchar(255),
    rent_from bigint,
    rent_to bigint,
    note varchar(255),
    parking_capacity integer,
    parking_car_type varchar(255),
    recommendation_code varchar(255),
    recommendation_note varchar(255),
    resident varchar(255),
    state varchar(255),
    street_accessibility varchar(255),
    subway_distance varchar(255),
    subway_line_cd varchar(255),
    subway_minute integer,
    town_name varchar(255),
    updated_date timestamp not null,
    usage_type_cb varchar(255),
    client_id bigint not null,
    consultant_username varchar(255) not null,
    created_username varchar(255) not null,
    updated_username varchar(255) not null,
    primary key (id)
);

create table consulting (
    proposal_id bigint not null,
    office_id bigint not null,
    state varchar(255),
    primary key (proposal_id, office_id)
);

alter table consulting add constraint FK_OFFICE_ID foreign key (office_id) references office;
alter table consulting add constraint FK_PROPOSAL_ID foreign key (proposal_id) references proposal;



insert into realty_user(username, password, enabled) values('pcspapa', '1111', true);
insert into realty_user(username, password, enabled) values('korea', '1111', true);

insert into realty_authority(id, username, role) values(1, 'pcspapa', 'ROLE_CONSULTANT');
insert into realty_authority(id, username, role) values(2, 'korea', 'ROLE_CONSULTANT');

insert into building(id, address_building_name, address_city, address_street, address_zipcode, basement_floor, ground_floor, created_username, created_date, updated_username, updated_date) values(1, '국회도서관'       , '서울시', '서울특별시 영등포구 의사당대로 1', '12345', 5, 1, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into building(id, address_building_name, address_city, address_street, address_zipcode, basement_floor, ground_floor, created_username, created_date, updated_username, updated_date) values(2, '카카오 스페이스닷원', '서울시', '제주특별자치도 제주시 첨단로 242', '63309', 3, 0, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());

insert into contact(id, company_name, email, mobile_no, phone_no, fullname, created_username, created_date, updated_username, updated_date) values(1, 'google'  , 'google@cspark.com'  , '010-1234-5678', '02-1234-5678', '구글'   , 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into contact(id, company_name, email, mobile_no, phone_no, fullname, created_username, created_date, updated_username, updated_date) values(2, 'facebook', 'facebook@cspark.com', '010-2345-6789', '02-2345-6789', '페이스북', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into contact(id, company_name, email, mobile_no, phone_no, fullname, created_username, created_date, updated_username, updated_date) values(3, 'twitter' , 'twitter@cspark.com' , '010-3456-7890', '02-3456-7890', '트위터'  , 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into contact(id, company_name, email, mobile_no, phone_no, fullname, created_username, created_date, updated_username, updated_date) values(4, 'daum'    , 'daum@cspark.com'    , '010-4567-8901', '02-4567-8901', '다음'   , 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());


insert into building_contact(building_id, contact_id, director) values(1, 1, '건물주');
insert into building_contact(building_id, contact_id, director) values(1, 2, '임대인');
insert into building_contact(building_id, contact_id, director) values(2, 3, '건물주');

insert into office (id, building_id, item_deal_cd, item_type_cd, floor_from, floor_to, floor_note, rental_py, exclusive_py, deposit, maintenance_fee, rent, created_username, created_date, updated_username, updated_date) values(1, 1, '임대', '사무실', 1,  null, '전체', 890, 800, 3000, 300, 30, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into office (id, building_id, item_deal_cd, item_type_cd, floor_from, floor_to, floor_note, rental_py, exclusive_py, deposit, maintenance_fee, rent, created_username, created_date, updated_username, updated_date) values(2, 1, '임대', '사무실', 2,  null, '전체', 200, 170, 4000, 400, 40, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into office (id, building_id, item_deal_cd, item_type_cd, floor_from, floor_to, floor_note, rental_py, exclusive_py, deposit, maintenance_fee, rent, created_username, created_date, updated_username, updated_date) values(3, 1, '임대', '사무실', 3,  null, '전체', 250, 200, 5000, 500, 50, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into office (id, building_id, item_deal_cd, item_type_cd, floor_from, floor_to, floor_note, rental_py, exclusive_py, deposit, maintenance_fee, rent, created_username, created_date, updated_username, updated_date) values(4, 1, '임대', '사무실', 4,  null, '전체', 530, 500, 6000, 600, 60, 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());

insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 1, 1, 'pcspapa', '사무실', '임대', 10, 100, 110, 10, 10, 1000, 1110, 1100, 1110, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 2, 2,   'korea', '사무실', '임대', 10, 110, 120, 10, 11, 1110, 2120, 1110, 1120, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 3, 3, 'pcspapa', '사무실', '임대', 10, 120, 130, 10, 12, 2120, 3130, 1120, 1130, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 4, 4,   'korea', '사무실', '임대', 10, 130, 140, 10, 13, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 5, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 14, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 6, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 15, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 7, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 16, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 8, 2,   'korea', '사무실', '임대', 10, 130, 140, 10, 16, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values( 9, 3, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 17, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(10, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 18, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(11, 1,   'korea', '사무실', '임대', 10, 130, 140, 10, 21, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(12, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 14, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(13, 2, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 13, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(14, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 12, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(15, 3,   'korea', '사무실', '임대', 10, 130, 140, 10, 16, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(16, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 17, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(17, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 18, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(18, 4,   'korea', '사무실', '임대', 10, 130, 140, 10, 19, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(19, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 14, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(20, 3,   'korea', '사무실', '임대', 10, 130, 140, 10, 13, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(21, 4, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 14, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(22, 2, 'pcspapa', '사무실', '임대', 10, 130, 140, 10, 18, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());
insert into proposal(id, client_id, consultant_username, item_type_cd, item_deal_cd, building_type_cd, area_from, area_to, usage_type_cb, floor, deposit_from, deposit_to, lease_from, lease_to, state, created_username, created_date, updated_username, updated_date) values(23, 1,   'korea', '사무실', '임대', 10, 130, 140, 10, 34, 3130, 4140, 1130, 1140, '진행', 'pcspapa', CURRENT_TIMESTAMP(), 'pcspapa', CURRENT_TIMESTAMP());

insert into consulting(proposal_id, office_id, state) values(1, 1, '진행');
insert into consulting(proposal_id, office_id, state) values(1, 2, '완결');
insert into consulting(proposal_id, office_id, state) values(1, 3, '진행');

insert into consulting(proposal_id, office_id, state) values(2, 1, '진행');
insert into consulting(proposal_id, office_id, state) values(3, 1, '진행');